{"version":3,"sources":["pages/HomePage/HomePage.module.css","pages/HomePage/HomePage.js","components/MoviesList/MoviesList.module.css","services/API.js","components/LoadMoreButton/LoadMoreButton.js","components/LoadMoreButton/LoadMoreButton.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/MoviesList/defaultPoster.png","components/MoviesList/MovieListItem.js","components/MoviesList/MoviesList.js"],"names":["module","exports","HomePage","state","movies","loading","page","handleLoadMore","setState","prevState","a","requestTrendingMovies","this","then","resp","results","length","toast","error","console","log","catch","finally","className","s","wrapper","loadMore","Component","BASE_URL","API_KEY","axios","get","data","requestDetails","movieId","type","requestLatestMovies","requestTV","requestCredits","requestReviews","requestSearch","query","LoadMoreButton","onClick","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","withRouter","movie","location","movieName","name","title","original_name","original_title","to","pathname","id","media_type","item","overlayBox","poster_path","image","src","alt","defaultPoster","overlay","materialIcons","rating","vote_average","vote_count","list","map"],"mappings":"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","file":"static/js/HomePage.0eb5263c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"HomePage_wrapper__AWVb6\",\"loadMore\":\"HomePage_loadMore__Y-q5R\"};","import Loader from 'components/Loader/Loader.js';\nimport LoadMoreButton from 'components/LoadMoreButton/LoadMoreButton.js';\nimport MoviesList from 'components/MoviesList/MoviesList.js';\nimport React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport { requestTrendingMovies } from '../../services/API.js';\nimport s from './HomePage.module.css';\nexport default class HomePage extends Component {\n  state = {\n    movies: [],\n    loading: true,\n    page: 1,\n  };\n  async componentDidMount() {\n    await requestTrendingMovies(this.state.page).then(resp => {\n      this.setState({ movies: resp.results, loading: false });\n    });\n  }\n\n  async componentDidUpdate() {\n    if (this.state.loading)\n      await requestTrendingMovies(this.state.page)\n        .then(resp => {\n          if (resp.results.length === 0) {\n            return toast.error(`Тут больше ничего нет!`);\n          }\n          console.log(resp);\n          this.setState(prevState => ({\n            movies: [...prevState.movies, ...resp.results],\n          }));\n        })\n        .catch(error => {\n          if (error) {\n            return toast.error(`Попробуйте позже`);\n          }\n        })\n        .finally(\n          this.setState({\n            loading: false,\n          }),\n        );\n  }\n\n  handleLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n      loading: true,\n    }));\n  };\n\n  render() {\n    const { movies, loading } = this.state;\n    return (\n      <>\n        {movies.length > 0 && (\n          <div className={s.wrapper}>\n            <MoviesList movies={movies} />\n            {movies.length > 0 && (\n              <LoadMoreButton loadMore={this.handleLoadMore} />\n            )}\n          </div>\n        )}\n        {loading && <Loader />}\n      </>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MoviesList_list__1lRBZ\",\"item\":\"MoviesList_item__1Rt4r\",\"overlay\":\"MoviesList_overlay__2dKJp\",\"overlayBox\":\"MoviesList_overlayBox__igveO\",\"image\":\"MoviesList_image__1405t\",\"rating\":\"MoviesList_rating__3Fyds\",\"name\":\"MoviesList_name__Pf9ZE\"};","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'c1e53addfa80b01d9b5d3a3d23b4febe'; //Ключ API (v3 auth)\n\nexport async function requestTrendingMovies(page = 1) {\n  const { data } = await axios.get(\n    `${BASE_URL}/trending/all/week?api_key=${API_KEY}&page=${page}&language=ru-RU&include_image_language=en`,\n  );\n  return data;\n}\n\nexport async function requestDetails(movieId, type) {\n  const { data } = await axios.get(\n    `${BASE_URL}/${type}/${movieId}?api_key=${API_KEY}&language=ru-RU&append_to_response=videos&include_image_language=en`,\n  );\n\n  return data;\n}\n\nexport async function requestLatestMovies(page = 1) {\n  const { data } = await axios.get(\n    `${BASE_URL}/movie/popular?api_key=${API_KEY}&page=${page}&language=ru-RU&include_image_language=en`,\n  );\n  return data;\n}\n\nexport async function requestTV(page = 1) {\n  const { data } = await axios.get(\n    `${BASE_URL}/tv/popular?api_key=${API_KEY}&page=${page}&language=ru-RU&include_image_language=en`,\n  );\n  return data;\n}\n\nexport async function requestCredits(movieId, type) {\n  const { data } = await axios.get(\n    `${BASE_URL}/${type}/${movieId}/credits?api_key=${API_KEY}&language=ru-RU`,\n  );\n\n  return data;\n}\nexport async function requestReviews(movieId, type) {\n  const { data } = await axios.get(\n    `${BASE_URL}/${type}/${movieId}/reviews?api_key=${API_KEY}`,\n  );\n\n  return data;\n}\n\nexport async function requestSearch(query, page = 1) {\n  const { data } = await axios.get(\n    `${BASE_URL}/search/multi?api_key=${API_KEY}&query=${query}&page=${page}&language=ru-RU`,\n  );\n  return data;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './LoadMoreButton.module.css';\n\nexport default function LoadMoreButton({ loadMore }) {\n  return (\n    <button type=\"button\" className={s.loadMore} onClick={() => loadMore()}>\n      Еще...\n    </button>\n  );\n}\n\nLoadMoreButton.propTypes = {\n  loadMore: PropTypes.func.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadMore\":\"LoadMoreButton_loadMore__1fDrE\"};","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default __webpack_public_path__ + \"static/media/defaultPoster.de522d98.png\";","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport s from './MoviesList.module.css';\nimport defaultPoster from './defaultPoster.png';\nimport PropTypes from 'prop-types';\n\nconst MoviesListItem = ({ movie, type, location }) => {\n  const movieName =\n    movie.name || movie.title || movie.original_name || movie.original_title;\n  return (\n    <Link\n      to={{\n        pathname: `/movies/${movie.id}/${movie.media_type || type}`,\n        state: {\n          from: location,\n        },\n      }}\n    >\n      <li className={s.item}>\n        <div className={s.overlayBox}>\n          {movie.poster_path ? (\n            <img\n              className={s.image}\n              src={`https://image.tmdb.org/t/p/w500/${movie.poster_path}`}\n              alt={movieName}\n            />\n          ) : (\n            <img className={s.image} src={defaultPoster} alt={movieName} />\n          )}\n          <div className={s.overlay}>\n            <i className={`material-icons ${s.materialIcons}`}>grade</i>\n            <span className={s.rating}>{movie.vote_average}</span>\n            <i className={`material-icons ${s.materialIcons}`}>group</i>\n            <span className={s.rating}>{movie.vote_count}</span>\n          </div>\n          <h2 className={s.name}>{movieName}</h2>\n        </div>\n      </li>\n    </Link>\n  );\n};\n\nexport default withRouter(MoviesListItem);\n\nMoviesListItem.propTypes = {\n  movie: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    media_type: PropTypes.string,\n    poster_path: PropTypes.string,\n    name: PropTypes.string,\n    title: PropTypes.string,\n    original_name: PropTypes.string,\n    original_title: PropTypes.string,\n    vote_average: PropTypes.number,\n    vote_count: PropTypes.number,\n  }).isRequired,\n  // getType: PropTypes.func.isRequired,\n  type: PropTypes.string,\n};\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport MoviesListItem from './MovieListItem';\nimport PropTypes from 'prop-types';\n\nimport s from './MoviesList.module.css';\n\nconst MoviesList = ({ movies, type }) => {\n  return (\n    <div className={s.list}>\n      {movies.map(movie => {\n        return <MoviesListItem movie={movie} key={movie.id} type={type} />;\n      })}\n    </div>\n  );\n};\nexport default withRouter(MoviesList);\n\nMoviesList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }).isRequired,\n  ).isRequired,\n  // getType: PropTypes.func.isRequired,\n  type: PropTypes.string,\n};\n"],"sourceRoot":""}